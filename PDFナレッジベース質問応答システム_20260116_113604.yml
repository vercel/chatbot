app:
  description: PDFãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ç™»éŒ²ã—ã€ãã®å†…å®¹ã‚’å‚ç…§ã—ãªãŒã‚‰è³ªå•ã«å›ç­”ã™ã‚‹RAGã‚·ã‚¹ãƒ†ãƒ 
  icon: ğŸ“š
  icon_background: '#FF6B6B'
  mode: advanced-chat
  name: PDFãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹è³ªå•å¿œç­”ã‚·ã‚¹ãƒ†ãƒ 
  use_icon_as_answer_icon: false
dependencies: []
kind: app
version: 0.1.5
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions: []
      allowed_file_types: []
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: PDFãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã«é–¢ã™ã‚‹è³ªå•ã‚’ã©ã†ã
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã®ä½¿ã„æ–¹ã‚’æ•™ãˆã¦ãã ã•ã„
    - ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã«ã¯ã©ã®ã‚ˆã†ãªæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ
    - ã‚ˆãã‚ã‚‹è³ªå•ã‚’æ•™ãˆã¦ãã ã•ã„
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    # Start â†’ Knowledge Retrieval
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: knowledge-retrieval
      id: '1736300000000-1736300001000'
      source: '1736300000000'
      sourceHandle: source
      target: '1736300001000'
      targetHandle: target
      type: custom
      zIndex: 0
    # Knowledge Retrieval â†’ LLM
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: llm
      id: '1736300001000-1736300002000'
      source: '1736300001000'
      sourceHandle: source
      target: '1736300002000'
      targetHandle: target
      type: custom
      zIndex: 0
    # LLM â†’ Answer
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: '1736300002000-1736300003000'
      source: '1736300002000'
      sourceHandle: source
      target: '1736300003000'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    # 1. Startãƒãƒ¼ãƒ‰
    - data:
        desc: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è³ªå•ã‚’å—ã‘å–ã‚Šã¾ã™
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - label: è³ªå•
          max_length: 1000
          required: true
          type: text-input
          variable: query
      height: 88
      id: '1736300000000'
      position:
        x: 50
        y: 300
      positionAbsolute:
        x: 50
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    # 2. Knowledge Retrievalãƒãƒ¼ãƒ‰
    - data:
        dataset_ids:
        - 'YOUR_DATASET_ID_HERE'  # å¾Œã§Difyã®ç®¡ç†ç”»é¢ã§è¨­å®šã—ã¦ãã ã•ã„
        desc: ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã‹ã‚‰è³ªå•ã«é–¢é€£ã™ã‚‹æƒ…å ±ã‚’æ¤œç´¢ãƒ»å–å¾—ã—ã¾ã™
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: netease-youdao/bce-reranker-base_v1
            provider: siliconflow
          top_k: 3
        query_variable_selector:
        - '1736300000000'
        - query
        retrieval_mode: multiple
        selected: false
        title: ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹æ¤œç´¢
        type: knowledge-retrieval
      height: 246
      id: '1736300001000'
      position:
        x: 350
        y: 300
      positionAbsolute:
        x: 350
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    # 3. LLMãƒãƒ¼ãƒ‰
    - data:
        context:
          enabled: true
          variable_selector:
          - '1736300001000'
          - result
        desc: ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ã—ãŸæƒ…å ±ã‚’åŸºã«ã€è³ªå•ã«å¯¾ã™ã‚‹å›ç­”ã‚’ç”Ÿæˆã—ã¾ã™
        memory:
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: openai
        prompt_template:
        - id: system_prompt
          role: system
          text: |
            ã‚ãªãŸã¯ã€PDFãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å†…å®¹ã‚’å‚ç…§ã—ãªãŒã‚‰è³ªå•ã«å›ç­”ã™ã‚‹å°‚é–€ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚
            ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦å›ç­”ã—ã¦ãã ã•ã„ï¼š
            
            1. ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ã—ãŸæƒ…å ±ã‚’åŸºã«ã€æ­£ç¢ºã§åˆ†ã‹ã‚Šã‚„ã™ã„å›ç­”ã‚’æä¾›ã—ã¦ãã ã•ã„
            2. å‚ç…§ã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å†…å®¹ã«åŸºã¥ã„ãŸæƒ…å ±ã®ã¿ã‚’æä¾›ã—ã€æ¨æ¸¬ã‚„æ†¶æ¸¬ã¯é¿ã‘ã¦ãã ã•ã„
            3. å¿…è¦ã«å¿œã˜ã¦ã€è©²å½“ç®‡æ‰€ã‚„å‡ºå…¸ã‚’æ˜ç¤ºã—ã¦ãã ã•ã„
            4. å°‚é–€ç”¨èªãŒå«ã¾ã‚Œã‚‹å ´åˆã¯ã€åˆå¿ƒè€…ã«ã‚‚ç†è§£ã—ã‚„ã™ã„ã‚ˆã†ã€å¹³æ˜“ãªèª¬æ˜ã‚’æ·»ãˆã¦ãã ã•ã„
            5. å›ç­”ã¯è‡ªç„¶ã§èª­ã¿ã‚„ã™ã„æ—¥æœ¬èªã§è¨˜è¿°ã—ã¦ãã ã•ã„
        - id: user_prompt
          role: user
          text: |
            ä»¥ä¸‹ã®è³ªå•ã«å¯¾ã—ã¦ã€ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ã—ãŸæƒ…å ±ã‚’åŸºã«å›ç­”ã—ã¦ãã ã•ã„ã€‚
            
            ã€è³ªå•ã€‘
            {{#1736300000000.query#}}
            
            ã€å‚è€ƒæƒ…å ±ã€‘
            {{#context#}}
        selected: false
        title: å›ç­”ç”Ÿæˆ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 98
      id: '1736300002000'
      position:
        x: 650
        y: 300
      positionAbsolute:
        x: 650
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    # 4. Answerãƒãƒ¼ãƒ‰
    - data:
        answer: '{{#1736300002000.text#}}'
        desc: ç”Ÿæˆã•ã‚ŒãŸå›ç­”ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¡¨ç¤ºã—ã¾ã™
        selected: false
        title: å›ç­”
        type: answer
      height: 107
      id: '1736300003000'
      position:
        x: 950
        y: 300
      positionAbsolute:
        x: 950
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.8
  rag_pipeline_variables: []

